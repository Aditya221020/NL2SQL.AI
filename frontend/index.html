<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NL2SQL.AI - Chat with Your Database</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <!-- Landing Page -->
    <div id="landingPage" class="page">
        <header class="hero-header">
            <div class="container">
                <h1 class="hero-title">NL2SQL.AI</h1>
                <p class="hero-subtitle">Transform Natural Language into SQL Queries</p>
                <p class="hero-description">
                    Ask questions in plain English and get instant SQL results from your databases. 
                    Powered by Google's Gemini AI for accurate query generation.
                </p>
            </div>
        </header>

        <main class="main-content">
            <div class="container">
                <!-- Features Section -->
                <section class="features-section">
                    <h2>How It Works</h2>
                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-icon">üìä</div>
                            <h3>Upload Database</h3>
                            <p>Upload your SQLite database files or create new ones</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">üí¨</div>
                            <h3>Ask Questions</h3>
                            <p>Type questions in natural language like "Show me all users"</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">‚ö°</div>
                            <h3>Get Results</h3>
                            <p>Instantly see SQL queries and results from your data</p>
                        </div>
                    </div>
                </section>

                <!-- Examples Section -->
                <section class="examples-section">
                    <h2>Example Queries</h2>
                    <div class="examples-grid">
                        <div class="example-card">
                            <div class="example-query">"Show me all users"</div>
                            <div class="example-result">‚Üí SELECT * FROM users;</div>
                        </div>
                        <div class="example-card">
                            <div class="example-query">"Find orders from this month"</div>
                            <div class="example-result">‚Üí SELECT * FROM orders WHERE strftime('%Y-%m', order_date) = strftime('%Y-%m', 'now');</div>
                        </div>
                        <div class="example-card">
                            <div class="example-query">"Count products by category"</div>
                            <div class="example-result">‚Üí SELECT category, COUNT(*) FROM products GROUP BY category;</div>
                        </div>
                    </div>
                </section>

                <!-- Auth Section -->
                <section class="auth-section">
                    <h2>Get Started</h2>
                    <div class="auth-buttons">
                        <button class="btn btn-primary" onclick="showLogin()">Login</button>
                        <button class="btn btn-secondary" onclick="showRegister()">Register</button>
                    </div>
                </section>
            </div>
        </main>

        <footer class="footer">
            <div class="container">
                <p>&copy; 2024 NL2SQL.AI - Powered by Google Gemini AI</p>
            </div>
        </footer>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Login to Your Account</h2>
                <span class="close" onclick="hideLogin()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginUsername">Username</label>
                        <input type="text" id="loginUsername" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Login</button>
                </form>
                <p class="auth-switch">
                    Don't have an account? <a href="#" onclick="showRegister()">Register here</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create New Account</h2>
                <span class="close" onclick="hideRegister()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="registerForm">
                    <div class="form-group">
                        <label for="registerUsername">Username</label>
                        <input type="text" id="registerUsername" required>
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Password</label>
                        <input type="password" id="registerPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <input type="password" id="confirmPassword" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Register</button>
                </form>
                <p class="auth-switch">
                    Already have an account? <a href="#" onclick="showLogin()">Login here</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Dashboard Page -->
    <div id="dashboardPage" class="page hidden">
        <header class="dashboard-header">
            <div class="container">
                <div class="header-content">
                    <h1>NL2SQL.AI Dashboard</h1>
                    <div class="header-actions">
                        <span class="welcome-text">Welcome, <span id="userName"></span>!</span>
                        <button class="btn btn-outline" onclick="logout()">Logout</button>
                    </div>
                </div>
            </div>
        </header>

        <main class="dashboard-content">
            <div class="container">
                <div class="dashboard-grid">
                    <!-- Uploaded Databases -->
                    <div class="database-section">
                        <div class="section-header">
                            <h2>üìÅ Uploaded Databases</h2>
                            <button class="btn btn-primary" onclick="showUploadModal()">Upload New</button>
                        </div>
                        <div class="database-list" id="uploadedDatabases">
                            <!-- Databases will be loaded here -->
                        </div>
                    </div>

                    <!-- Created Databases -->
                    <div class="database-section">
                        <div class="section-header">
                            <h2>üóÑÔ∏è Created Databases</h2>
                            <button class="btn btn-primary" onclick="showCreateModal()">Create New</button>
                        </div>
                        <div class="database-list" id="createdDatabases">
                            <!-- Databases will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Chat Page -->
    <div id="chatPage" class="page hidden">
        <header class="chat-header">
            <div class="container">
                <div class="header-content">
                    <button class="btn btn-outline" onclick="goToDashboard()">‚Üê Back to Dashboard</button>
                    <h1>Chat with <span id="currentDbName"></span></h1>
                    <div class="header-actions">
                        <span class="db-info">Database: <span id="currentDbType"></span></span>
                    </div>
                </div>
            </div>
        </header>

        <main class="chat-content">
            <div class="container">
                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <div class="message bot-message">
                            <div class="message-content">
                                <p>Hello! I'm your SQL assistant. Ask me anything about your database in natural language.</p>
                                <p><strong>Examples:</strong></p>
                                <ul>
                                    <li>"Show me all users"</li>
                                    <li>"Find orders from this month"</li>
                                    <li>"Count products by category"</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <!-- Download Options (hidden by default) -->
                    <div id="downloadOptions" style="margin-top: 1rem; display: none; text-align:center;">
                    <button class="btn btn-secondary" onclick="downloadResult('csv')">‚¨áÔ∏è Download CSV</button>
                    <button class="btn btn-secondary" onclick="downloadResult('xlsx')">‚¨áÔ∏è Download Excel</button>
                    <button class="btn btn-secondary" onclick="downloadResult('json')">‚¨áÔ∏è Download JSON</button>
                    </div>

                    
                    <div class="chat-input-container">
                        <form id="chatForm" class="chat-form">
                            <div class="input-group">
                                <input type="text" id="chatInput" placeholder="Ask a question about your database..." required>
                                <button type="submit" class="btn btn-primary">Send</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Upload Database Modal -->
    <div id="uploadModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Upload Database</h2>
                <span class="close" onclick="hideUploadModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="uploadForm">
                    <div class="form-group">
                        <label for="dbFile">Select Database File (.db)</label>
                        <input type="file" id="dbFile" accept=".db" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Upload Database</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Create Database Modal -->
    <div id="createModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create New Database</h2>
                <span class="close" onclick="hideCreateModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="createForm">
                    <div class="form-group">
                        <label for="dbName">Database Name</label>
                        <input type="text" id="dbName" placeholder="e.g., my_database" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Create Database</button>
                </form>
            </div>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>

</html>
